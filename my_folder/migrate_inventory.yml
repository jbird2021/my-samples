---

- name: Migrate Networking Inventory.
  hosts: localhost
  connection: local
  gather_facts: false
  become: false

#  vars_files:
#    - /vaults/tower.yml

  tasks:
    - name: Add inventory
      awx.awx.inventory:
        controller_host: 10.0.109.3
        controller_username: "admin"
        controller_password: "test"
        validate_certs: False
        name: "Foo Inventory"
        description: "Our Foo Cloud Servers"
        organization: "Default"
        state: present
        
    - name: Export inventory
      awx.awx.export:
        controller_host: 10.0.109.3
        controller_username: "admin"
        controller_password: "test"
        validate_certs: False
        ansible.controller.export.inventory: ['Foo Inventory']
      register: export_output

#    - name: Import inventory
#      ansible.controller.import:
#        assets: "{{ export_output }}"
#        controller_host: 10.0.109.3
#        controller_username: "{{ tower_user }}"
#        controller_password: "{{ tower_pass }}"
#      register: import_output

    - name: Show Export Output.
      ansible.builtin.debug:
        var: export_output

#    - name: Show Import Output.
#      ansible.builtin.debug:
#        var: import_output
